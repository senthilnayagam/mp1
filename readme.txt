porting examples from c to golang